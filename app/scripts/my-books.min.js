(function(a){a(function(){a("button.restore").click(function(){var c=a(this);var f='<div class="modal hide fade confirm-dialog" role="dialog">';f+='<div class="modal-header">';f+='<button type="button" class="close" data-dismiss="modal">×</button>';f+="<h3>Restore Book to the Exchange</h3>";f+="</div>";f+='<div class="modal-body confirm-dialog-details">';f+="<p>This action will renew your book's time slot on the book exchange, and will display it for another "+c.attr("data-expire")+" "+(parseInt(c.attr("data-expire"))==1?"month":"months")+" from today.<br><br>Do you wish to continue?</p>";f+="</div>";f+='<div class="modal-footer">';f+='<span class="validate"></span>';f+='<button class="btn btn-primary confirm">Yes</button>';f+='<button class="btn close-dialog" data-dismiss="modal">No</button>';f+="</div>";f+="</div>";var d=a(f);var e=d.find("button.confirm");var b=d.find("span.validate");d.modal();e.click(function(){e.attr("disabled","disabled").html("Please wait...");b.text("");a.ajax({data:{ID:c.attr("data-id")},type:"POST",url:document.location.href.substring(0,document.location.href.indexOf("book-exchange"))+"wp-content/plugins/book-exchange/app/includes/ajax/restore.php",success:function(j){if(j=="success"){d.modal("hide");if(!c.parent().hasClass("expired")&&!c.parent().hasClass("sold")){var h=a("span.saleTotal");var i=parseInt(h.text());h.text(++i);i==1?h.next("span").text("Book for Sale"):h.next("span").text("Books for Sale")}c.parent().removeAttr("class");c.siblings("h3").children("span.notice").remove();c.remove();var g=a('<span class="success"/>');g.appendTo("body").text("Your book's time slot has been exteneded.");setTimeout(function(){g.fadeOut(500,function(){g.remove()})},5000)}else{b.text(j);if(b.is(":hidden")){alert(j)}e.removeAttr("disabled").html("Yes")}}})})});a("button.delete").click(function(){var c=a(this);var f='<div class="modal hide fade confirm-dialog" role="dialog">';f+='<div class="modal-header">';f+='<button type="button" class="close" data-dismiss="modal">×</button>';f+="<h3>Delete a Book</h3>";f+="</div>";f+='<div class="modal-body confirm-dialog-details">';f+="<p>This action will delete this book from the exchange. Your book will be permanently deleted and cannot be restored.<br><br>Do you wish to continue?</p>";f+="</div>";f+='<div class="modal-footer">';f+='<span class="validate"></span>';f+='<button class="btn btn-danger confirm">Yes</button>';f+='<button class="btn close-dialog" data-dismiss="modal">No</button>';f+="</div>";f+="</div>";var d=a(f);var e=d.find("button.confirm");var b=d.find("span.validate");d.modal();e.click(function(){e.attr("disabled","disabled").html("Please wait...");b.text("");a.ajax({data:{ID:c.attr("data-id")},type:"POST",url:document.location.href.substring(0,document.location.href.indexOf("book-exchange"))+"wp-content/plugins/book-exchange/app/includes/ajax/delete.php",success:function(j){if(j=="success"){d.modal("hide");if(!c.parent().hasClass("expired")&&!c.parent().hasClass("sold")){var h=a("span.saleTotal");var i=parseInt(h.text());h.text(--i);i==1?h.next("span").text("Book for Sale"):h.next("span").text("Books for Sale")}if(!c.parent().siblings("li").length){!c.parent().parent().siblings("div.none").show()}c.parent().remove();var g=a('<span class="success"/>');g.appendTo("body").text("Your book has been deleted.");setTimeout(function(){g.fadeOut(500,function(){g.remove()})},5000)}else{b.text(j);if(b.is(":hidden")){alert(j)}e.removeAttr("disabled").html("Yes")}}})})})})})(jQuery);